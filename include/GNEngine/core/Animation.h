#pragma once
#include "../GNEngine_API.h" 

#include <vector>
#include <string>
#include <filesystem>
#include <SDL3/SDL_rect.h>

/*
 * @class Animation
 * @brief ?좊땲硫붿씠???곗씠???먯껜瑜??뺤쓽?섎뒗 ?대옒?ㅼ엫.
 * ?띿뒪泥?寃쎈줈, 媛??꾨젅?꾩쓽 ?곸뿭怨?吏???쒓컙, 諛섎났 ?щ? ?깆쓽 ?뺣낫瑜??닿퀬 ?덉쓬.
 * ???대옒?ㅻ뒗 ?곗씠??而⑦뀒?대꼫 ??븷???섎ŉ, ?ㅼ젣 ?좊땲硫붿씠??濡쒖쭅? AnimationComponent?먯꽌 泥섎━??
 */
class GNEngine_API Animation {
public:
    /*
     * @brief Animation ?앹꽦??
     * @param texturePath - ?좊땲硫붿씠?섏뿉 ?ъ슜???띿뒪泥??ㅽ봽?쇱씠???쒗듃)???뚯씪 寃쎈줈.
     * @param loop - ?좊땲硫붿씠?섏쓽 諛섎났 ?щ? (湲곕낯媛? true).
     */
    Animation(std::filesystem::path texturePath, bool loop = true);

    /*
     * @brief ?좊땲硫붿씠?섏뿉 ???꾨젅?꾩쓣 異붽???
     * @param frameRect - ?ㅽ봽?쇱씠???쒗듃?먯꽌 ?대떦 ?꾨젅?꾩씠 李⑥??섎뒗 ?ш컖???곸뿭.
     * @param duration - ?대떦 ?꾨젅?꾩쓽 吏???쒓컙 (諛由ъ큹 ?⑥쐞).
     */
    void addFrame(SDL_Rect frameRect, int duration);

    /*
     * @brief ?뱀젙 ?몃뜳?ㅼ쓽 ?꾨젅???ш컖???곸뿭??諛섑솚??
     * @param frameIndex - 媛?몄삱 ?꾨젅?꾩쓽 ?몃뜳??
     * @return ?대떦 ?꾨젅?꾩쓽 SDL_Rect. ?몃뜳?ㅺ? ?좏슚?섏? ?딆쑝硫?鍮?SDL_Rect瑜?諛섑솚.
     */
    const SDL_Rect& getFrame(int frameIndex) const;

    /*
     * @brief ?뱀젙 ?몃뜳?ㅼ쓽 ?꾨젅??吏???쒓컙??諛섑솚??
     * @param frameIndex - 媛?몄삱 ?꾨젅?꾩쓽 ?몃뜳??
     * @return ?대떦 ?꾨젅?꾩쓽 吏???쒓컙 (諛由ъ큹). ?몃뜳?ㅺ? ?좏슚?섏? ?딆쑝硫?0??諛섑솚.
     */
    int getFrameDuration(int frameIndex) const;

    /*
     * @brief ?꾩껜 ?꾨젅???섎? 諛섑솚??
     * @return ?좊땲硫붿씠?섏쓽 珥??꾨젅????
     */
    int getFrameCount() const;

    /*
     * @brief ?좊땲硫붿씠?섏뿉 ?ъ슜?섎뒗 ?띿뒪泥섏쓽 ?뚯씪 寃쎈줈瑜?諛섑솚??
     * @return ?띿뒪泥섏쓽 ?뚯씪 寃쎈줈.
     */
    const std::filesystem::path& getTexturePath() const;

    /*
     * @brief ?좊땲硫붿씠?섏쓽 諛섎났 ?щ?瑜?諛섑솚??
     * @return 諛섎났?섎㈃ true, ?꾨땲硫?false.
     */
    bool isLooping() const;

private:
    std::filesystem::path texturePath_;
    std::vector<SDL_Rect> frames_;
    std::vector<int> frameDurations_;
    bool loop_;
};



